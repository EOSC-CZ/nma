{#def record, extra_context, md #}

<div class="ui borderless padded segment detail-main-record-segment">
  <div>
    {# <span class="text-medium">{{_('metadata/time_references/date_type.label')}}</span>: #}
    {# Change to issued #}
    <span title="{{_('metadata/time_references/date_type.label')}}" aria-description="{{_('metadata/time_references/date_type.help')}}">
      <IValue value={md.time_references|first|attr('date')} />
    </span>
    {% if md.version._has_value %}|
    <span title="{{_('metadata/version.label')}}" aria-description="{{_('metadata/version.help')}}">
      {{_('metadata/version.label')}} <IValue value={md.version} />
    </span>
    {% endif %}
  </div>
  
  <h1 class="ui header">
    <IValue value={md.title} placeholder={md.alternateTitles.0.value if md.alternateTitles._has_value else _('Title unknown')} />
  </h1>

  <hr class="ui divider" />

  <dl>
    <IField d={md.alternateTitles}>
      {# <AdditionalTitles d={md.alternateTitles}></AdditionalTitles> #}
      {% for title in array(md.alternateTitles) %}
        <Multilingual data={title} />
      {% endfor %}
    </IField>

    <Creatibutors qualified_relations={md.qualified_relations} search_link={record.links.search_link}></Creatibutors>

    <VocabularyItem vocabulary={md.resource_type} vocabulary_type="resource_type" search_link={record.links.search_link} search_facet="metadata_resource_type" />
{# 
    {% if md.dates._filter(dateType="Submitted")._select("date")._first() %}
    <IField label={_('metadata/dates/dateType.enum.Submitted')}>
      {{md.dates._filter(dateType="Submitted")._select("date")._first()}}
    </IField>
    {% endif %}

    <IField d={md.dates._filter(dateType="Modified" )._select("date")._first()} />

    <IField d={md.language} />

    <IField d={md.publisher}>
      <Publisher publisher={md.publisher} search_link={record.links.search_link}></Publisher>
    </IField>

    <IField d={md.accessibility} />
    <IField d={md.rights} />

    <IField d={md.subjects}>
      <Subjects subjects={md.subjects} search_link={record.links.search_link}></Subjects>
    </IField>

    <IField d={ md.events }>
      <NrEvents data={md.events}></NrEvents>
    </IField>

    <IField d={ md.externalLocation }>
      <NrExternalLocation data={md.externalLocation}></NrExternalLocation>
    </IField>

    {% if md.fundingReferences %}
    <IField d={md.fundingReferences}>
      <FundingReference funders={md.fundingReferences} search_link={record.links.search_link}>
      </FundingReference>
    </IField>
    {% endif %}

    <IField d={md.alternateIdentifiers}>
      <AlternateIdentifiers identifiers={md.alternateIdentifiers} search_link={record.links.search_link}>
      </AlternateIdentifiers>
    </IField>

    <IField d={md.rightsList}>
      <RightsList rights={md.rightsList} search_link={record.links.search_link}></RightsList>
    </IField>

    {% set abstracts = md.descriptions._filter(descriptionType="Abstract") %}
    <IField label={_('abstract')|capitalize}>
      <Multilingual data={abstracts} field="description" />
    </IField>

    {% for description in array(md.descriptions._filter(descriptionType__ne="Abstract")) %}
    <AccordionField label={description.descriptionType} title_class="detail-record-description">
      <p>{{description.description | safe}}</p>
    </AccordionField>
    {% endfor %} #}
  </dl>

</div>
